"use strict";(self.webpackChunkEStoryMapFront=self.webpackChunkEStoryMapFront||[]).push([[546],{6546:(M,p,s)=>{s.r(p),s.d(p,{LoginModule:()=>U});var f=s(60),m=s(4521),n=s(5e3),l=s(263),g=s(9224),b=s(5899);function S(i,r){1&i&&(n.TgZ(0,"mat-card-footer"),n._UZ(1,"mat-progress-bar",2),n.qZA())}let y=(()=>{class i{constructor(t){this.authService=t,this.loading=!1}ngOnInit(){this._loading=this.authService.loading$.subscribe(t=>this.loading=t)}ngOnDestroy(){this._loading.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(n.Y36(l.e))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-login"]],decls:5,vars:1,consts:[[1,"container"],[4,"ngIf"],["mode","indeterminate"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0),n.TgZ(1,"mat-card"),n.TgZ(2,"mat-card-content"),n._UZ(3,"router-outlet"),n.qZA(),n.YNc(4,S,2,0,"mat-card-footer",1),n.qZA(),n.qZA()),2&t&&(n.xp6(4),n.Q6J("ngIf",e.loading))},directives:[g.a8,g.dn,m.lC,f.O5,g.rt,b.pW],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;top:0;left:0;height:90vh}"]}),i})();var o=s(3075),h=s(1271),u=s(7322),Z=s(7531),v=s(7423);const C=function(){return["/login","signup"]},L=function(){return["/login","signin"]},A=[{path:"",component:y,children:[{path:"signin",component:(()=>{class i{constructor(t,e,a){this.authService=t,this.router=e,this.snackBar=a,this.isLoading=!1}ngOnInit(){this.signinForm=new o.cw({email:new o.NI("",[o.kI.required,o.kI.email]),password:new o.NI("",[o.kI.required,o.kI.minLength(6)])}),this._isLoading=this.authService.loading$.subscribe(t=>this.isLoading=t)}ngOnDestroy(){this._isLoading.unsubscribe()}submit(){var t,e;if(this.signinForm.valid){const a=null===(t=this.signinForm.get("email"))||void 0===t?void 0:t.value,d=null===(e=this.signinForm.get("password"))||void 0===e?void 0:e.value;this.authService.loginWithEmailAndPassword(a,d).then(()=>this.router.navigate(["/"])).catch(({message:c})=>this.snackBar.open(c,"ok",{duration:3e3}))}}}return i.\u0275fac=function(t){return new(t||i)(n.Y36(l.e),n.Y36(m.F0),n.Y36(h.ux))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-signin"]],decls:16,vars:5,consts:[[1,"center"],["autocomplete","off",1,"form",3,"formGroup","ngSubmit"],["matInput","","formControlName","email"],["matInput","","type","password","formControlName","password"],[1,"button"],["mat-button","","type","button",3,"routerLink","disabled"],["color","primary","type","submit","mat-raised-button","",3,"disabled"]],template:function(t,e){1&t&&(n.TgZ(0,"h2",0),n._uU(1,"Se connecter"),n.qZA(),n.TgZ(2,"form",1),n.NdJ("ngSubmit",function(){return e.submit()}),n.TgZ(3,"mat-form-field"),n.TgZ(4,"mat-label"),n._uU(5,"Email"),n.qZA(),n._UZ(6,"input",2),n.qZA(),n.TgZ(7,"mat-form-field"),n.TgZ(8,"mat-label"),n._uU(9,"Mot de passe"),n.qZA(),n._UZ(10,"input",3),n.qZA(),n.TgZ(11,"div",4),n.TgZ(12,"button",5),n._uU(13," S'inscrire "),n.qZA(),n.TgZ(14,"button",6),n._uU(15," Se connecter "),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(2),n.Q6J("formGroup",e.signinForm),n.xp6(10),n.Q6J("routerLink",n.DdM(4,C))("disabled",e.isLoading),n.xp6(2),n.Q6J("disabled",e.signinForm.invalid||e.isLoading))},directives:[o._Y,o.JL,o.sg,u.KE,u.hX,Z.Nt,o.Fj,o.JJ,o.u,v.lW,m.rH],styles:[".center[_ngcontent-%COMP%]{text-align:center}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:1em;padding:.5em}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),i})()},{path:"signup",component:(()=>{class i{constructor(t,e,a){this.authService=t,this.router=e,this.snackBar=a,this.isLoading=!1}ngOnInit(){this.signupForm=new o.cw({email:new o.NI("",[o.kI.required,o.kI.email]),name:new o.NI("",[o.kI.required]),password:new o.NI("",[o.kI.required,o.kI.minLength(6)]),comfirmPassword:new o.NI("",[o.kI.required])}),this._isLoading=this.authService.loading$.subscribe(t=>this.isLoading=t)}ngOnDestroy(){this._isLoading.unsubscribe()}submit(){var t,e,a;if(this.signupForm.valid){const d={name:null===(t=this.signupForm.get("name"))||void 0===t?void 0:t.value,email:null===(e=this.signupForm.get("email"))||void 0===e?void 0:e.value};this.authService.register(d,null===(a=this.signupForm.get("password"))||void 0===a?void 0:a.value).then(()=>this.router.navigate(["/"])).catch(({message:c})=>this.snackBar.open(c,"ok",{duration:3e3}))}}}return i.\u0275fac=function(t){return new(t||i)(n.Y36(l.e),n.Y36(m.F0),n.Y36(h.ux))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-signup"]],decls:24,vars:5,consts:[[1,"center"],["autocomplete","off",1,"form",3,"formGroup","ngSubmit"],["matInput","","formControlName","name"],["matInput","","formControlName","email"],["matInput","","type","password","formControlName","password"],["matInput","","type","password","formControlName","comfirmPassword"],[1,"button"],["mat-button","","type","button",3,"routerLink","disabled"],["color","primary","type","submit","mat-raised-button","",3,"disabled"]],template:function(t,e){1&t&&(n.TgZ(0,"h2",0),n._uU(1,"S'inscrire"),n.qZA(),n.TgZ(2,"form",1),n.NdJ("ngSubmit",function(){return e.submit()}),n.TgZ(3,"mat-form-field"),n.TgZ(4,"mat-label"),n._uU(5,"Nom"),n.qZA(),n._UZ(6,"input",2),n.qZA(),n.TgZ(7,"mat-form-field"),n.TgZ(8,"mat-label"),n._uU(9,"Email"),n.qZA(),n._UZ(10,"input",3),n.qZA(),n.TgZ(11,"mat-form-field"),n.TgZ(12,"mat-label"),n._uU(13,"Mot de passe"),n.qZA(),n._UZ(14,"input",4),n.qZA(),n.TgZ(15,"mat-form-field"),n.TgZ(16,"mat-label"),n._uU(17,"Comfirmer le mot de passe"),n.qZA(),n._UZ(18,"input",5),n.qZA(),n.TgZ(19,"div",6),n.TgZ(20,"button",7),n._uU(21," Se connecter "),n.qZA(),n.TgZ(22,"button",8),n._uU(23," S'inscrire "),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(2),n.Q6J("formGroup",e.signupForm),n.xp6(18),n.Q6J("routerLink",n.DdM(4,L))("disabled",e.isLoading),n.xp6(2),n.Q6J("disabled",e.signupForm.invalid||e.isLoading))},directives:[o._Y,o.JL,o.sg,u.KE,u.hX,Z.Nt,o.Fj,o.JJ,o.u,v.lW,m.rH],styles:[".center[_ngcontent-%COMP%]{text-align:center}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:1em;padding:.5em}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),i})()},{path:"",redirectTo:"signin",pathMatch:"full"}]}];let I=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[m.Bz.forChild(A)],m.Bz]}),i})();var F=s(9098);let U=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[f.ez,I,F.m,o.UX]]}),i})()}}]);