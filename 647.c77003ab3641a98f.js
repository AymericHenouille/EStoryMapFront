"use strict";(self.webpackChunkEStoryMapFront=self.webpackChunkEStoryMapFront||[]).push([[647],{9647:(y,s,e)=>{e.r(s),e.d(s,{ProfilModule:()=>O});var u=e(4521),r=e(3075),f=e(9300),t=e(5e3),d=e(263),p=e(1271),g=e(60),a=e(9224),h=e(7423),m=e(7322),_=e(7531);function Z(o,i){if(1&o&&(t.TgZ(0,"mat-card-content",9),t.TgZ(1,"span",10),t._uU(2,"Votre nom: "),t.TgZ(3,"span",11),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"span",10),t._uU(6,"Votre email: "),t.TgZ(7,"span",11),t._uU(8),t.qZA(),t.qZA(),t.qZA()),2&o){const n=t.oxw(2);t.xp6(4),t.Oqu(null==n.user?null:n.user.name),t.xp6(4),t.Oqu(null==n.user?null:n.user.email)}}function v(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).isEdit=!0}),t._uU(1," Editer le profile "),t.qZA()}}function x(o,i){if(1&o&&(t.TgZ(0,"mat-card",4),t.TgZ(1,"mat-card-header",5),t.TgZ(2,"h1"),t._uU(3,"Votre Profile"),t.qZA(),t.qZA(),t.YNc(4,Z,9,2,"mat-card-content",6),t.TgZ(5,"mat-card-actions",7),t.YNc(6,v,2,0,"button",8),t.qZA(),t.qZA()),2&o){const n=t.oxw(),l=t.MAs(3),c=t.MAs(5);t.xp6(4),t.Q6J("ngIf",!n.isEdit)("ngIfElse",l),t.xp6(2),t.Q6J("ngIf",!n.isEdit)("ngIfElse",c)}}function P(o,i){if(1&o&&(t.TgZ(0,"mat-card-content",9),t.TgZ(1,"form",14),t.TgZ(2,"mat-form-field"),t.TgZ(3,"mat-label"),t._uU(4,"Nom"),t.qZA(),t._UZ(5,"input",15),t.qZA(),t.TgZ(6,"mat-form-field"),t.TgZ(7,"mat-label"),t._uU(8,"Email"),t.qZA(),t._UZ(9,"input",16),t.qZA(),t.qZA(),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("formGroup",n.editProfilForm),t.xp6(4),t.Q6J("value",n.user.name),t.xp6(4),t.Q6J("value",n.user.email)}}function C(o,i){if(1&o&&t.YNc(0,P,10,3,"mat-card-content",13),2&o){const n=t.oxw();t.Q6J("ngIf",n.user)}}function T(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(n),t.oxw().save()}),t._uU(1," Sauvegarder "),t.qZA(),t.TgZ(2,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().isEdit=!1}),t._uU(3," Annuler "),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("disabled",n.editProfilForm.invalid)}}const A=[{path:"",component:(()=>{class o{constructor(n,l){this.authService=n,this.snackBar=l,this.isEdit=!1}ngOnInit(){this._user=this.authService.user$.pipe((0,f.h)(n=>!!n)).subscribe(n=>{this.user=n,this.editProfilForm=new r.cw({name:new r.NI(this.user.name),email:new r.NI(this.user.email)})})}ngOnDestroy(){var n;null===(n=this._user)||void 0===n||n.unsubscribe()}toggleEdit(){this.isEdit=!this.isEdit}save(){if(this.editProfilForm.valid){const l=2500;this.authService.updateUser(this.editProfilForm.value).then(()=>{this.snackBar.open("profile mis a jour","ok",{duration:l}),this.toggleEdit()}).catch(c=>this.snackBar.open(c,"ok",{duration:l}))}}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.e),t.Y36(p.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-profil"]],decls:6,vars:1,consts:[[1,"card-container"],["class","cards",4,"ngIf"],["editProfil",""],["saveOrCancel",""],[1,"cards"],[1,"header"],["class","content",4,"ngIf","ngIfElse"],[1,"actions"],["mat-raised-button","","color","accent",3,"click",4,"ngIf","ngIfElse"],[1,"content"],[1,"static-field"],[1,"value"],["mat-raised-button","","color","accent",3,"click"],["class","content",4,"ngIf"],[3,"formGroup"],["matInput","","autocomplete","off","formControlName","name",3,"value"],["matInput","","autocomplete","off","formControlName","email",3,"value"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-button","",3,"click"]],template:function(n,l){1&n&&(t.TgZ(0,"div",0),t.YNc(1,x,7,4,"mat-card",1),t.qZA(),t.YNc(2,C,1,1,"ng-template",null,2,t.W1O),t.YNc(4,T,4,1,"ng-template",null,3,t.W1O)),2&n&&(t.xp6(1),t.Q6J("ngIf",l.user))},directives:[g.O5,a.a8,a.dk,a.hq,a.dn,h.lW,r._Y,r.JL,r.sg,m.KE,m.hX,_.Nt,r.Fj,r.JJ,r.u],styles:[".card-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:70vh;width:100vw}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content[_ngcontent-%COMP%]   .static-field[_ngcontent-%COMP%]{font-weight:700}.content[_ngcontent-%COMP%]   .static-field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:lighter;font-style:italic}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild(A)],u.Bz]}),o})();var E=e(9098);let O=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[E.m,r.UX,M]]}),o})()}}]);