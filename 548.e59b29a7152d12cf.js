"use strict";(self.webpackChunkEStoryMapFront=self.webpackChunkEStoryMapFront||[]).push([[548],{9548:(D,u,a)=>{a.r(u),a.d(u,{WorkspaceModule:()=>$});var c=a(60),s=a(4521),e=a(5e3);let C=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-workspace-page"]],decls:2,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},directives:[s.lC],styles:[".container[_ngcontent-%COMP%]{padding-top:15px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width: 768px){.container[_ngcontent-%COMP%]{width:750px}}@media (min-width: 992px){.container[_ngcontent-%COMP%]{width:970px}}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{width:1170px}}"]}),o})();var h=a(4004),w=a(3900),v=a(1135),Z=a(5577),y=a(590),T=a(520),p=a(8966),k=a(7322),j=a(7531),l=a(3075),d=a(7423);function W(o,n){if(1&o&&(e.TgZ(0,"mat-hint",8),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("Le compte '",t.name,"' n'existe pas.")}}let M=(()=>{class o{constructor(t){this.httpClient=t,this.name="",this.valid=!1,this.nameSubject=new v.X("")}onSubmit(){}ngOnInit(){this._name=this.nameSubject.pipe((0,Z.z)(t=>this.httpClient.get(`user/${t}`).pipe((0,y.P)()))).subscribe(t=>this.valid=t)}ngOnDestroy(){this._name.unsubscribe()}updateName(t){this.nameSubject.next(this.name=t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.eN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-shared"]],decls:11,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"full"],["matInput","","type","text","placeholder","Nom de votre colaborateurs",3,"ngModel","ngModelChange"],["color","warn","align","end",4,"ngIf"],["align","end"],["mat-button","","mat-dialog-close",""],["color","primary","mat-raised-button","",3,"disabled","click"],["color","warn","align","end"]],template:function(t,r){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Inviter des colaborateurs"),e.qZA(),e.TgZ(2,"mat-dialog-content",1),e.TgZ(3,"mat-form-field",2),e.TgZ(4,"input",3),e.NdJ("ngModelChange",function(R){return r.updateName(R)}),e.qZA(),e.YNc(5,W,2,1,"mat-hint",4),e.qZA(),e.qZA(),e.TgZ(6,"mat-dialog-actions",5),e.TgZ(7,"button",6),e._uU(8," Anuller "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return r.onSubmit()}),e._uU(10," Inviter "),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngModel",r.name),e.xp6(1),e.Q6J("ngIf",!r.valid&&""!==r.name),e.xp6(4),e.Q6J("disabled",!r.valid))},directives:[p.uh,p.xY,k.KE,j.Nt,l.Fj,l.JJ,l.On,c.O5,p.H8,d.lW,p.ZT,k.bx],styles:[".full[_ngcontent-%COMP%]{width:100%}"]}),o})();var g=a(5856),A=a(3874),O=a(9300);const S=function(o){return{"border-top":o}};let x=(()=>{class o{constructor(t,r){this.workspaceService=t,this.routes=r}ngOnInit(){this._workspace=this.routes.paramMap.pipe((0,h.U)(t=>t.get("id")),(0,O.h)(t=>!!t),(0,w.w)(t=>this.workspaceService.getWorkspaceById(t))).subscribe(t=>this.workspace=t)}ngOnDestroy(){this._workspace.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.A),e.Y36(s.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-workspace-header"]],decls:1,vars:3,consts:[[3,"ngStyle"]],template:function(t,r){1&t&&e._UZ(0,"div",0),2&t&&e.Q6J("ngStyle",e.VKq(1,S,"solid 0.5em "+(null==r.workspace?null:r.workspace.color)))},directives:[c.PC],encapsulation:2}),o})();var f=a(7747),P=a(9760),b=a(2340),i=a(9224);const J=function(o){return{"border-top":o}},U=function(o){return["/project",o]};function F(o,n){if(1&o&&(e.TgZ(0,"mat-card",1),e.TgZ(1,"mat-card-title",2),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"img",3),e.TgZ(5,"mat-card-actions"),e.TgZ(6,"button",4),e._uU(7,"Ouvrir"),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngStyle",e.VKq(5,J,"solid 1em "+t.project.color)),e.xp6(3),e.AsE("",t.project.emoticon," ",t.project.label,""),e.xp6(1),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.Q6J("routerLink",e.VKq(7,U,t.project.id))}}let Q=(()=>{class o{get image(){return`${b.N.serverLocation}/api/projects/${this.project.id}/cover`}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-project-card"]],inputs:{project:"project"},decls:1,vars:1,consts:[[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[1,"title"],["alt","project cover",3,"src"],["mat-button","",3,"routerLink"]],template:function(t,r){1&t&&e.YNc(0,F,8,9,"mat-card",0),2&t&&e.Q6J("ngIf",r.project)},directives:[c.O5,i.a8,c.PC,i.n5,i.hq,d.lW,s.rH],styles:[".title[_ngcontent-%COMP%]{text-overflow:ellipsis}img[_ngcontent-%COMP%]{width:300px;height:auto}"]}),o})();function I(o,n){1&o&&e._UZ(0,"app-project-card",9),2&o&&e.Q6J("project",n.$implicit)}function N(o,n){if(1&o&&(e.TgZ(0,"div",4),e.YNc(1,I,1,1,"app-project-card",5),e.TgZ(2,"div",6),e._UZ(3,"app-add-workspace",7),e._UZ(4,"app-add-project",8),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.workspace.projects),e.xp6(2),e.Q6J("workspace",t.workspace),e.xp6(1),e.Q6J("workspace",t.workspace)}}let Y=(()=>{class o{constructor(t,r,m){this.workspaceService=t,this.routes=r,this.dialog=m}ngOnInit(){this._workspace=this.routes.paramMap.pipe((0,h.U)(t=>t.get("id")),(0,w.w)(t=>this.workspaceService.getWorkspaceById(t))).subscribe(t=>this.workspace=t)}ngOnDestroy(){this._workspace.unsubscribe()}share(){this.dialog.open(M,{data:{workspace:this.workspace}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.A),e.Y36(s.gz),e.Y36(p.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-workspace-view"]],decls:10,vars:3,consts:[[1,"header"],["mat-icon-button","",3,"click"],[1,"title"],["class","projects",4,"ngIf"],[1,"projects"],[3,"project",4,"ngFor","ngForOf"],[1,"down-right"],["mode","edit",3,"workspace"],[3,"workspace"],[3,"project"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1"),e._uU(2),e.qZA(),e.TgZ(3,"button",1),e.NdJ("click",function(){return r.share()}),e.TgZ(4,"mat-icon"),e._uU(5,"shared"),e.qZA(),e.qZA(),e.qZA(),e._UZ(6,"app-workspace-header"),e.TgZ(7,"h1",2),e._uU(8,"Mes projets"),e.qZA(),e.YNc(9,N,5,3,"div",3)),2&t&&(e.xp6(2),e.AsE("",null==r.workspace?null:r.workspace.emoticon," ",null==r.workspace?null:r.workspace.label,""),e.xp6(7),e.Q6J("ngIf",r.workspace))},directives:[d.lW,A.Hw,x,c.O5,c.sg,f.g,P.S,Q],styles:[".projects[_ngcontent-%COMP%]{display:flex;grid-gap:1em;gap:1em;flex-wrap:wrap}.down-right[_ngcontent-%COMP%]{position:absolute;right:1em;bottom:1em}.down-right[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:.5em}.title[_ngcontent-%COMP%]{margin-top:1em}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1em}"]}),o})();var V=a(508);const H=function(o){return{"border-top":o}},X=function(o){return["/workspaces",o]};let B=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-workspace-card"]],inputs:{workspace:"workspace"},decls:3,vars:8,consts:[["matRipple","",1,"card",3,"ngStyle","routerLink"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-card",0),e.TgZ(1,"mat-card-title"),e._uU(2),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngStyle",e.VKq(4,H,"solid 1em "+r.workspace.color))("routerLink",e.VKq(6,X,r.workspace.id)),e.xp6(2),e.AsE(" ",r.workspace.emoticon," ",r.workspace.label," "))},directives:[i.a8,V.wG,c.PC,s.rH,i.n5],styles:[".card[_ngcontent-%COMP%]{max-height:100px;cursor:pointer}"]}),o})();function E(o,n){1&o&&e._UZ(0,"app-workspace-card",3),2&o&&e.Q6J("workspace",n.$implicit)}const L=[{path:"",component:C,children:[{path:"",component:(()=>{class o{constructor(t){this.workspaceService=t,this.workspaces=[]}ngOnInit(){this._workspaces=this.workspaceService.workspaces$.subscribe(t=>this.workspaces=t)}ngOnDestroy(){this._workspaces.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-workspace"]],decls:5,vars:1,consts:[[1,"workspaces"],[3,"workspace",4,"ngFor","ngForOf"],[1,"down-right"],[3,"workspace"]],template:function(t,r){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Mes workspaces"),e.qZA(),e.TgZ(2,"div",0),e.YNc(3,E,1,1,"app-workspace-card",1),e._UZ(4,"app-add-workspace",2),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",r.workspaces))},directives:[c.sg,f.g,B],styles:[".workspaces[_ngcontent-%COMP%]{display:flex;grid-gap:1em;gap:1em;flex-wrap:wrap}.down-right[_ngcontent-%COMP%]{position:absolute;right:1em;bottom:1em}"]}),o})()},{path:":id",component:Y}]}];let q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[s.Bz.forChild(L)],s.Bz]}),o})();var z=a(9098),K=a(7354);let $=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,q,z.m,K.W,l.u5]]}),o})()}}]);